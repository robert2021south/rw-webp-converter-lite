# Codeception Test Suite Configuration
#
# Suite for acceptance tests
# Emulate web requests and make application process them
# Include one of framework modules (Symfony, Yii2, Laravel, Phalcon5) to use it
# Remove this suite if you don't use frameworks

actor: AcceptanceTester
suite_namespace: Tests\Acceptance
modules:
    # enable helpers as array
    enabled:
        - WPDb
        - WPLoader
        - WPFilesystem
        - WPWebDriver
        - Asserts
        - \Tests\Support\Helper\Acceptance
    config:
      WPDb:
        dsn: 'mysql:host=dummy;dbname=dummy'
        user: 'dummy'
        password: 'dummy'
        url: 'http://dummy'
        tablePrefix: 'wp_'
        populate: true
        cleanup: true
        dump: ''
        databases:
          default:
            dsn: 'mysql:host=mysql;port=3306;dbname=wordpress'
            user: 'wpuser'
            password: 'wppass'
      WPFilesystem:
        wpRootFolder: '/var/www/html/'
      WPLoader:
        wpRootFolder: '/var/www/html/'
        dbName: 'wordpress'
        dbHost: 'mysql'
        dbUser: 'wpuser'
        dbPassword: 'wppass'
        tablePrefix: 'wp_'
        domain: 'nginx'
        adminEmail: 'robert2021south@gmail.com'
        title: 'Test Blog'
        loadOnly: true
      WPWebDriver:
        url: 'http://nginx'
        adminPath: '/wp-admin'
        adminUsername: 'admin'
        adminPassword: 'pBlaWDphJvFab5Jbi3KR9q6s'
        browser: chrome
        host: selenium   # 修改为本地 Selenium 服务名
        port: 4444
        restart: true
        use_w3c: true
        waitForElement: 10
        capabilities:
          chromeOptions:
            args:
              - "--headless=new"
              - "--no-sandbox"
              - "--disable-dev-shm-usage"
              - "--window-size=1280,1024"
              - "--disable-gpu"
              - "--disable-extensions"
              - "--disable-software-rasterizer"

            prefs:
              download.default_directory: '/var/www/html/wp-content/plugins/rw-webp-converter-lite/tests/_output'
              download.prompt_for_download: false
              directory_upgrade: true
              safebrowsing.enabled: true
              plugins.always_open_pdf_externally: true
        debug: true
        verbose: true
